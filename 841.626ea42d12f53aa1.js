"use strict";(self.webpackChunkthreads_app=self.webpackChunkthreads_app||[]).push([[841],{841:(v,p,i)=>{i.r(p),i.d(p,{HomeComponent:()=>_});var e=i(946),c=i(814);let a=(()=>{class n{constructor(){this.placeholder="Write something...",this.buttonText="Create",this.formSubmitted=new e.vpe}formSubmit(t){t.preventDefault();const o=t.target,r=o.elements.namedItem("commentText").value;o.reset(),console.log({commentText:r}),this.formSubmitted.emit({text:r})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-comment-form"]],inputs:{placeholder:"placeholder",buttonText:"buttonText"},outputs:{formSubmitted:"formSubmitted"},standalone:!0,features:[e.jDz],decls:4,vars:2,consts:[[1,"flex","flex-col","items-end","gap-4",3,"submit"],["name","commentText","rows","3",1,"px-3","py-1.5","w-full","border","border-slate-900","rounded-md",3,"placeholder"],["type","submit",1,"inline-block","rounded","border","border-current","px-4","py-1","text-sm","font-medium","text-indigo-600","transition","hover:rotate-2","hover:scale-110","focus:outline-none","focus:ring","active:text-indigo-500"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.NdJ("submit",function(r){return o.formSubmit(r)}),e._UZ(1,"textarea",1),e.TgZ(2,"button",2),e._uU(3),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("placeholder",o.placeholder),e.xp6(2),e.hij(" ",o.buttonText," "))},dependencies:[c.ez]}),n})();var f=i(474),l=i(553);let d=(()=>{class n{constructor(){this.http=(0,e.f3M)(f.eN)}getComments(t=""){let o=`${l.N.apiBaseUrl}/comments`;return t&&(o+=`?parentId=${t}`),this.http.get(o)}createComment(t){return this.http.post(`${l.N.apiBaseUrl}/comments`,t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var u=i(76);function g(n,m){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"section",13)(1,"app-comment-form",14),e.NdJ("formSubmitted",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.createComment(s))}),e.qZA()()}}function h(n,m){1&n&&e._UZ(0,"app-comment",17),2&n&&e.Q6J("comment",m.$implicit)}function C(n,m){if(1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"section",15),e.YNc(1,h,1,1,"app-comment",16),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.nestedComments())("ngForTrackBy",t.commentTrackBy)}}let x=(()=>{class n{constructor(){this.isExpanded=(0,e.tdS)(!1),this.isReplying=(0,e.tdS)(!1),this.commentService=(0,e.f3M)(d),this.userService=(0,e.f3M)(u.K),this.nestedComments=(0,e.tdS)([]),this.nestedCommentsEffect=(0,e.cEC)(()=>{this.isExpanded()&&this.commentService.getComments(this.comment._id).subscribe(t=>{this.nestedComments.set(t)})})}toggleReplying(){this.isReplying.set(!this.isReplying()),this.isReplying()&&this.isExpanded.set(!0)}toggleExpanded(){this.isExpanded.set(!this.isExpanded())}createComment(t){const{text:o}=t,s=this.userService.getUserFromStorage();s&&this.commentService.createComment({text:o,userId:s._id,parentId:this.comment._id}).subscribe(r=>{this.nestedComments.set([r,...this.nestedComments()])})}commentTrackBy(t,o){return o._id}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-comment"]],inputs:{comment:"comment"},standalone:!0,features:[e.jDz],decls:19,vars:6,consts:[[1,"shadow-md","relative","block","overflow-hidden","rounded-lg","border","border-gray-200","p-4","sm:p-6","lg:p-8"],[1,"absolute","inset-x-0","bottom-0","h-2","bg-gradient-to-r","from-green-300","via-blue-500","to-purple-600"],[1,"sm:flex","sm:justify-between","sm:gap-4"],[1,"text-lg","font-bold","text-gray-900","sm:text-xl"],[1,"mt-4"],[1,"text-sm","text-gray-500"],[1,"mt-6","flex","justify-end","gap-4","sm:gap-6"],[1,"inline-block","rounded","border","border-current","px-4","py-1","text-sm","font-medium","text-indigo-600","transition","hover:rotate-2","hover:scale-110","focus:outline-none","focus:ring","active:text-indigo-500",3,"click"],[1,"duration-200",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M19.5 8.25l-7.5 7.5-7.5-7.5"],["class","my-4",4,"ngIf"],["class","nested-comments",4,"ngIf"],[1,"my-4"],["placeholder","Write your reply","buttonText","Send",3,"formSubmitted"],[1,"nested-comments"],[3,"comment",4,"ngFor","ngForOf","ngForTrackBy"],[3,"comment"]],template:function(t,o){1&t&&(e.TgZ(0,"article",0),e._UZ(1,"span",1),e.TgZ(2,"div",2)(3,"div")(4,"h3",3),e._uU(5),e.qZA()()(),e.TgZ(6,"div",4)(7,"p",5),e._uU(8),e.qZA()(),e.TgZ(9,"dl",6)(10,"button",7),e.NdJ("click",function(){return o.toggleReplying()}),e._uU(11," Reply "),e.qZA(),e.TgZ(12,"button"),e._uU(13," 12 Likes "),e.qZA(),e.TgZ(14,"button",8),e.NdJ("click",function(){return o.toggleExpanded()}),e.O4$(),e.TgZ(15,"svg",9),e._UZ(16,"path",10),e.qZA()()(),e.YNc(17,g,2,0,"section",11),e.YNc(18,C,2,2,"section",12),e.qZA()),2&t&&(e.xp6(5),e.hij(" ",o.comment.user.name," "),e.xp6(3),e.hij(" ",o.comment.text," "),e.xp6(6),e.ekj("rotate-180",o.isExpanded()),e.xp6(3),e.Q6J("ngIf",o.isReplying()),e.xp6(1),e.Q6J("ngIf",o.isExpanded()))},dependencies:[n,c.ez,c.sg,c.O5,a]}),n})();function b(n,m){1&n&&e._UZ(0,"app-comment",4),2&n&&e.Q6J("comment",m.$implicit)}let _=(()=>{class n{constructor(){this.commentService=(0,e.f3M)(d),this.comments=(0,e.tdS)([]),this.userService=(0,e.f3M)(u.K)}ngOnInit(){this.getComments()}getComments(){this.commentService.getComments().subscribe(t=>{this.comments.set(t)})}createComment(t){const{text:o}=t,s=this.userService.getUserFromStorage();s&&this.commentService.createComment({text:o,userId:s._id}).subscribe(r=>{this.comments.set([r,...this.comments()])})}commentTrackBy(t,o){return o._id}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-home"]],standalone:!0,features:[e.jDz],decls:4,vars:2,consts:[[1,"max-w-md","mx-auto","flex","flex-col","gap-4","mb-4"],[3,"formSubmitted"],[1,"max-w-md","mx-auto","flex","flex-col","gap-4"],[3,"comment",4,"ngFor","ngForOf","ngForTrackBy"],[3,"comment"]],template:function(t,o){1&t&&(e.TgZ(0,"section",0)(1,"app-comment-form",1),e.NdJ("formSubmitted",function(r){return o.createComment(r)}),e.qZA()(),e.TgZ(2,"section",2),e.YNc(3,b,1,1,"app-comment",3),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngForOf",o.comments())("ngForTrackBy",o.commentTrackBy))},dependencies:[c.ez,c.sg,x,a]}),n})()}}]);